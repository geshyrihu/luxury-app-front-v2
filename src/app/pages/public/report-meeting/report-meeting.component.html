<ng-container *ngIf="this.data !== undefined">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-body">
            <div *ngIf="data.minuta">
              <div class="table-responsive header-customer">
                <table class="table">
                  <tbody>
                    <tr>
                      <td style="width: 20%">
                        <img
                          [src]="data.minutaCliente.customerLogo"
                          alt=""
                          class="avatar-lg h-auto d-block rounded"
                        />
                      </td>
                      <td style="width: 60%">
                        <h4 class="text-center font-size-16 mb-1">
                          {{ data.minutaCliente.customer }}
                        </h4>
                        <h4 class="text-center font-size-16 mb-1">
                          Minuta de junta con {{ data.minuta.eTypeMeeting }}
                        </h4>
                        <div class="text-center">
                          <p mb-0>{{ data.minuta.date }}</p>
                        </div>
                      </td>
                      <td style="width: 20%"></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <ng-container *ngIf="data.comite && data.comite.length > 0">
              <p-table [value]="data.comite" styleClass="custom-table">
                <ng-template pTemplate="caption">
                  <p class="text-center m-0 p-0">Comité de vigilancia</p>
                </ng-template>

                <ng-template pTemplate="header">
                  <tr>
                    <th scope="col" style="width: 2%">N°</th>
                    <th scope="col" style="width: 20%">Cargo</th>
                    <th scope="col" style="width: 53%">Nombre</th>
                    <th scope="col" style="width: 35%">Firma</th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowIndex="rowIndex" let-item>
                  <tr>
                    <td>
                      <p class="mb-0">{{ rowIndex + 1 }}</p>
                    </td>
                    <td>
                      <p class="mb-0">{{ item.cargo }}</p>
                    </td>
                    <td>
                      <p class="mb-0">{{ item.nombre }}</p>
                    </td>
                    <td></td>
                  </tr>
                </ng-template>
              </p-table>
            </ng-container>

            <!-- Administración -->
            <ng-container
              *ngIf="data.administracion && data.administracion.length > 0"
            >
              <p-table [value]="data.administracion" styleClass="custom-table">
                <ng-template pTemplate="caption">
                  <p class="text-center m-0 p-0">Administración</p>
                </ng-template>

                <ng-template pTemplate="header">
                  <tr>
                    <th scope="col" style="width: 2%">N°</th>
                    <th scope="col" style="width: 20%">Cargo</th>
                    <th scope="col" style="width: 53%">Nombre</th>
                    <th scope="col" style="width: 35%">Firma</th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowIndex="rowIndex" let-item>
                  <tr>
                    <td>
                      <p class="mb-0">{{ rowIndex + 1 }}</p>
                    </td>
                    <td>
                      <p class="mb-0">{{ item.cargo }}</p>
                    </td>
                    <td>
                      <p class="mb-0">{{ item.nombre }}</p>
                    </td>
                    <td></td>
                  </tr>
                </ng-template>
              </p-table>
            </ng-container>
            <!-- Administración -->
            <!-- Participantes -->
            <ng-container *ngIf="data.externos && data.externos.length > 0">
              <p-table [value]="data.externos" styleClass="custom-table">
                <ng-template pTemplate="caption">
                  <p class="text-center m-0 p-0">Invitados</p>
                </ng-template>

                <ng-template pTemplate="header">
                  <tr>
                    <th scope="col" style="width: 2%">#</th>
                    <th scope="col" style="width: 60%">Nombre</th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowIndex="rowIndex" let-item>
                  <tr>
                    <td>
                      <p class="mb-0">{{ rowIndex + 1 }}</p>
                    </td>
                    <td>
                      <p class="mb-0">{{ item.invitado }}</p>
                    </td>
                  </tr>
                </ng-template>
              </p-table>
            </ng-container>
            <!-- Participantes -->
            <hr />

            <ng-container *ngIf="detalles">
              <p-table [value]="detalles" styleClass="p-datatable-sm">
                <ng-template pTemplate="body" let-item>
                  <tr>
                    <td>
                      <h4>
                        {{ item.responsibleArea }}
                      </h4>
                      <p-table
                        [value]="item.items"
                        styleClass=" p-datatable-sm"
                      >
                        <ng-template
                          pTemplate="body"
                          let-asunto
                          let-i="rowIndex"
                        >
                          <tr>
                            <td>
                              <p>{{ i + 1 }}.- {{ asunto.title }}</p>
                              <p
                                class="text-justify"
                                [innerHTML]="
                                  asunto.requestService | sanitizeHtml
                                "
                              ></p>
                            </td>
                          </tr>
                        </ng-template>
                      </p-table>
                    </td>
                  </tr>
                </ng-template>
              </p-table>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-container>
